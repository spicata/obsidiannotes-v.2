var F=Object.defineProperty;var G=Object.getOwnPropertyDescriptor;var X=Object.getOwnPropertyNames;var Y=Object.prototype.hasOwnProperty;var Q=(a,r)=>{for(var e in r)F(a,e,{get:r[e],enumerable:!0})},Z=(a,r,e,t)=>{if(r&&typeof r=="object"||typeof r=="function")for(let n of X(r))!Y.call(a,n)&&n!==e&&F(a,n,{get:()=>r[n],enumerable:!(t=G(r,n))||t.enumerable});return a};var ee=a=>Z(F({},"__esModule",{value:!0}),a);var ae={};Q(ae,{default:()=>E});module.exports=ee(ae);var O=require("obsidian");var L=require("obsidian");var I=Symbol.for("v1.to-use.peak-dev.org"),R=Symbol.for("v1.factory.to-use.peak-dev.org"),b,W,m=function(){return Object.defineProperties(a(),{this:{get(){if(b)return b;throw new TypeError("No current context")}},me:{value:I},factory:{value:R}});function a(n){let i=new Map;i.prev=n;let o=Object.assign(n?s=>{let p=i.get(s);if(!p){for(let w=i.prev;w;w=w.prev)if(p=w.get(s)){p=Object.assign(Object.assign({},p),{s:p.s||1});break}p=p||{s:2,v:e},i.set(s,p)}let f,u,d;for(;;)switch(p.s){case 0:return b===o&&W&&W.push(s),p.v;case 1:if(f=p.d,!f||l(()=>f.k.every(w=>o(w)===f.c(w)))){p.s=0;break}p.v=f.f;case 2:p.s=4;try{r(i,s,0,l(u=p.v,s,d=[])),d.length&&(p.d={c:o,f:u,k:d});break}catch(w){p.s=3,p.v=w,p.d=null}case 3:throw p.v;case 4:throw new Error(`Factory ${String(p.v)} didn't resolve ${String(s)}`)}}:s=>m.this(s),{def(s,p){return r(i,s,2,p),o},set(s,p){return r(i,s,1,p),o},fork(s){let p=a(i);return s!=null?p(s):p}});return n?o.use=o:o;function l(s,p,f){let u=b,d=W;try{return b=o,W=f,s(p)}finally{b=u,W=d}}}function r(n,i,o,l){if(n.has(i)){let s=n.get(i);if(!s.s)throw new Error(`Already read: ${String(i)}`);s.s=o,s.v=l,s.d=null}else n.set(i,{s:o,v:l})}function e(n){if(typeof n[I]=="function")return n[I](n);if(t(n))return typeof n.prototype[R]=="function"?n.prototype[R]():new n;throw new ReferenceError(`No config for ${String(n)}`)}function t(n){return typeof n=="function"&&n.prototype!==void 0&&(Object.getPrototypeOf(n.prototype)!==Object.prototype||Object.getOwnPropertyNames(n.prototype).length>1||n.toString().startsWith("class"))}}();m.def(L.Plugin,()=>{throw new Error("Plugin not created yet")});var x=class extends L.Component{constructor(){super(...arguments);this.use=m.service(this)}};m.service=function(a){return m(M).addChild(a),m.this};m.plugin=function(a){let r=m.fork().set(L.Plugin,a).set(a.constructor,a);return a.addChild(r.use(M)),r};var M=class extends L.Component{constructor(){super(...arguments);this.children=new Set([this])}onload(){this.loaded=!0}onunload(){this.loaded=!1,this.children.clear()}addChild(e){return this.children.has(e)||(this.children.add(e),this.loaded?Promise.resolve().then(()=>super.addChild(e)):super.addChild(e)),e}};var B={};function c(a,r,e=[],t={}){typeof e=="string"&&(e=[e]),typeof e=="object"&&e.key&&(e=[e]);let n=e.map(function(o){if(typeof o=="object")return o;let l=o.split("+");return{modifiers:l,key:l.pop()||"+"}});Object.assign(t,{id:a,name:r,hotkeys:n});let i=Symbol("cmd:"+a);return B[i]=t,i}function $(a,r=a.constructor.prototype){Object.getOwnPropertySymbols(r).forEach(e=>{let t=B[e],n=r[e];t&&a.addCommand(Object.assign({},t,{checkCallback(i){let o=n.call(a);return i||typeof o!="function"?!!o:(o(),!0)}}))})}var y=require("obsidian");function S(a,r){let e=Object.keys(r).map(t=>te(a,t,r[t]));return e.length===1?e[0]:function(){e.forEach(t=>t())}}function te(a,r,e){let t=a[r],n=a.hasOwnProperty(r),i=e(t);return t&&Object.setPrototypeOf(i,t),Object.setPrototypeOf(o,i),a[r]=o,l;function o(...s){return i===t&&a[r]===o&&l(),i.apply(this,s)}function l(){a[r]===o&&(n?a[r]=t:delete a[r]),i!==t&&(i=t,Object.setPrototypeOf(o,t||Function))}}var v="pane-relief:history-v1",z="pane-relief:history-v1",V=new WeakMap,P=class{constructor(r){this.setState(r)}get viewState(){return JSON.parse(this.raw.state||"{}")}setState(r){var e;this.raw=r,this.eState=JSON.parse(r.eState||"null"),this.path=(e=this.viewState.state)==null?void 0:e.file}onRename(r,e){if(this.path===e){let t=this.viewState;this.path=t.state.file=r.path,this.raw.state=JSON.stringify(t)}}go(r){let{viewState:e,path:t,eState:n}=this,i=t&&(app==null?void 0:app.vault.getAbstractFileByPath(t));t&&!i&&(new y.Notice("Missing file: "+t),e={type:"empty",state:{}},n=void 0),r.setViewState({...e,active:!0,popstate:!0},n)}isEmpty(){return JSON.parse(this.raw.state||"{}").type==="empty"}replaceState(r){var e;if(r.state!==this.raw.state){let t=JSON.parse(r.state||"{}");if(t.type==="empty")return!0;if(this.path&&this.path!==((e=t==null?void 0:t.state)==null?void 0:e.file))return!1;if(t.type==="media-view"){let n=JSON.stringify(this.viewState.state.info),i=JSON.stringify(t.state.info);if(n!==i)return!1}}return this.setState(r),!0}},h=class{constructor(r,{pos:e,stack:t}={pos:0,stack:[]}){this.leaf=r;this.leaf=r,this.pos=e,this.stack=t.map(n=>new P(n))}static current(){return this.forLeaf(app.workspace.activeLeaf)||new this}static forLeaf(r){var e;if(r&&V.set(r.containerEl,r),r)return r[v]instanceof this?r[v]:r[v]=new this(r,((e=r[v])==null?void 0:e.serialize())||void 0)}cloneTo(r){return r[v]=new h(r,this.serialize())}onRename(r,e){for(let t of this.stack)t.onRename(r,e)}serialize(){return{pos:this.pos,stack:this.stack.map(r=>r.raw)}}get state(){var r;return((r=this.stack[this.pos])==null?void 0:r.raw)||null}get length(){return this.stack.length}back(){this.go(-1)}forward(){this.go(1)}lookAhead(){return this.stack.slice(0,this.pos).reverse()}lookBehind(){return this.stack.slice(this.pos+1)}announce(){var r;(r=app==null?void 0:app.workspace)==null||r.trigger("pane-relief:update-history",this.leaf,this)}goto(r){var e;if(!!this.leaf){if(this.leaf.pinned)return new y.Notice("Pinned pane: unpin before going forward or back"),void 0;if(this.leaf.working)return new y.Notice("Pane is busy: please wait before navigating further"),void 0;r=this.pos=Math.max(0,Math.min(r,this.stack.length-1)),(e=this.stack[r])==null||e.go(this.leaf),this.announce()}}go(r,e){if(!this.leaf||!r)return;let t=Math.max(0,Math.min(this.pos-r,this.stack.length-1));e||t!==this.pos?this.goto(t):new y.Notice(`No more ${r<0?"back":"forward"} history for pane`)}replaceState(r,e,t){let n=this.stack[this.pos];n?n.replaceState(r)||this.pushState(r,e,t):this.stack[this.pos]=new P(r)}pushState(r,e,t){let n=this.stack[this.pos];if(n&&n.isEmpty())return this.replaceState(r,e,t);for(this.stack.splice(0,this.pos,new P(r)),this.pos=0;this.stack.length>20;)this.stack.pop();this.announce()}};function K(a){a.register(S(y.WorkspaceLeaf.prototype,{serialize(e){return function(){let n=e.call(this);return this[v]&&(n[z]=this[v].serialize()),n}},setViewState(e){return function(n,i){var o;return n.popstate&&((o=window.event)==null?void 0:o.type)==="popstate"?Promise.resolve():e.call(this,n,i)}}})),a.register(S(app.workspace,{deserializeLayout(e){return async function(n,...i){let o=await e.call(this,n,...i);if(n.type==="leaf"){if(!o&&(n.state.type="empty",o=await e.call(this,n,...i),!o))return o;n[z]&&(o[v]=new h(o,n[z]))}return o}},setActiveLeaf(e){return function(n,...i){let o=S(this,{recordHistory(l){return function(s,p,...f){return l.call(this,s,!1,...f)}}});try{return e.call(this,n,...i)}finally{o()}}}}));let r=window.history;a.register(()=>window.history=r),Object.defineProperty(window,"history",{enumerable:!0,configurable:!0,writable:!0,value:{get state(){return h.current().state},get length(){return h.current().length},back(){a.isSyntheticHistoryEvent(3)||this.go(-1)},forward(){a.isSyntheticHistoryEvent(4)||this.go(1)},go(e){h.current().go(e)},replaceState(e,t,n){h.current().replaceState(e,t,n)},pushState(e,t,n){h.current().pushState(e,t,n)},get scrollRestoration(){return r.scrollRestoration},set scrollRestoration(e){r.scrollRestoration=e}}})}var A=require("obsidian");function T(a,r,e){let t=a.classList.contains(r);return e=e!=null?e:!t,e!==t&&(e?a.classList.add(r):a.classList.remove(r)),e}var C=class extends A.Component{constructor(){super(...arguments);this.fixSlidingPanes=(0,A.debounce)(()=>{app.plugins.plugins["sliding-panes-obsidian"]&&(app.workspace.onLayoutChange(),app.workspace.requestActiveLeafEvents())},5)}onload(){this.registerEvent(app.workspace.on("layout-change",()=>{for(let t of this.parents())this.refresh(t)}));let e=this;this.register(S(app.workspace,{setActiveLeaf(t){return function(i,o,l){let s=e.parentForLeaf(i),p=e.parentForLeaf(app.workspace.activeLeaf);return s&&p&&s!==p&&p.matchParent(".hover-popover.is-active.snap-to-viewport")&&s.ownerDocument===p.ownerDocument&&!s.matchParent(".hover-popover")&&app.commands.executeCommandById("obsidian-hover-editor:restore-active-popover"),s&&e.refresh(s,s.hasClass("should-maximize")?i.containerEl:null),t.call(this,i,o,l)}}}))}onunload(){for(let e of this.parents())this.refresh(e,null)}toggleMaximize(e=app.workspace.activeLeaf){let t=this.parentForLeaf(e);if(!t)return;let n=t.matchParent(".hover-popover");if(n&&app.plugins.plugins["obsidian-hover-editor"]&&n.findAll(".workspace-leaf").length===1){app.commands.executeCommandById("obsidian-hover-editor:"+(n.hasClass("snap-to-viewport")?"restore-active-popover":"snap-active-popover-to-viewport"));return}t&&this.refresh(t,T(t,"should-maximize")?e.containerEl:null)}lastMaximized(e){return e.find(".workspace-leaf.is-maximized")||app.workspace.getMostRecentLeaf().containerEl}refresh(e,t=e.hasClass("should-maximize")?this.lastMaximized(e):null){let n=e.hasClass("has-maximized");e.findAllSelf(".workspace-split").forEach(i=>{(i===e||this.parentFor(i)===e)&&T(i,"has-maximized",t?i.contains(t):!1)}),e.findAll(".workspace-leaf").forEach(i=>{this.parentFor(i)===e&&T(i,"is-maximized",i===t)}),(!t||!e.contains(t))&&(T(e,"should-maximize",!1),n&&this.fixSlidingPanes())}parents(){var n,i,o;let e=[app.workspace.rootSplit.containerEl];e.concat(((i=(n=app.workspace.floatingSplit)==null?void 0:n.children)!=null?i:[]).map(l=>l.containerEl));let t=(o=app.plugins.plugins["obsidian-hover-editor"])==null?void 0:o.activePopovers;if(t)for(let l of t)l.rootSplit&&e.push(l.rootSplit.containerEl);return e}parentForLeaf(e){return this.parentFor(e==null?void 0:e.containerEl)}parentFor(e){return e==null?void 0:e.matchParent(".workspace-split.mod-root, .hover-popover > .popover-content > .workspace-split")}};var g=require("obsidian");var q=require("obsidian");var H=class extends q.Component{constructor(e,t){super();this.use=e;this.win=t}get root(){return re(this.win)}[m.factory](){return new J(this.constructor)}},J=class extends x{constructor(e){super();this.factory=e;this.instances=new WeakMap;this.watching=!1}watch(){if(!this._loaded)this.onload=()=>this.watch();else if(!this.watching){let{workspace:e}=app;this.watching=!0,this.registerEvent(e.on("window-open",(t,n)=>{e.onLayoutReady(()=>Promise.resolve().then(()=>this.forWindow(n)))})),e.onLayoutReady(()=>Promise.resolve().then(()=>this.forAll()))}return this}forWindow(e=(n=>(n=window.activeWindow)!=null?n:window)(),t=!0){let i=this.instances.get(e);return!i&&t&&(i=new this.factory(this.use,e),i&&(this.instances.set(e,i),i.registerDomEvent(e,"beforeunload",()=>{this.removeChild(i),this.instances.delete(e)}),this.addChild(i))),i||void 0}forDom(e,t=!0){return this.forWindow(ne(e),t)}forLeaf(e,t=!0){return this.forDom(e.containerEl,t)}forView(e,t=!0){return this.forLeaf(e.leaf,t)}windows(){let e=[window],{floatingSplit:t}=app.workspace;if(t)for(let n of t.children)n.win&&e.push(n.win);return e}forAll(e=!0){return this.windows().map(t=>this.forWindow(t,e)).filter(t=>t)}};function ne(a){return(a.ownerDocument||a).defaultView}function re(a){if(a===window)return app.workspace.rootSplit;let{floatingSplit:r}=app.workspace;if(r){for(let e of r.children)if(a===e.win)return e}}var ie={markdown:"document",image:"image-file",audio:"audio-file",video:"audio-file",pdf:"pdf-file",localgraph:"dot-network",outline:"bullet-list",backlink:"link",kanban:"blocks",excalidraw:"excalidraw-icon","media-view":"audio-file"},_={graph:["dot-network","Graph View"],"file-explorer":["folder","File Explorer"],starred:["star","Starred Files"],tag:["tag","Tags View"],"recent-files":["clock","Recent Files"],calendar:["calendar-with-checkmark","Calendar"],empty:["cross","No file"]},D=class extends H{constructor(){super(...arguments);this.plugin=this.use(E);this.historyIsOpen=!1}display(e=this.latestLeaf()){if(!this.historyIsOpen){if(!this._loaded){this.load();return}this.win.requestAnimationFrame(()=>{let t=e?h.forLeaf(e):new h;this.back.setHistory(t),this.forward.setHistory(t),e&&this.updateLeaf(e,t)})}}leaves(){var i;let e=new Set,t=o=>{e.add(o)};app.workspace.iterateLeaves(t,this.root);let n=(i=app.plugins.plugins["obsidian-hover-editor"])==null?void 0:i.activePopovers;if(n)for(let o of n)o.hoverEl.ownerDocument.defaultView===this.win&&(o.rootSplit?app.workspace.iterateLeaves(t,o.rootSplit):o.leaf&&t(o.leaf));return[...e.values()]}latestLeaf(){let e=app.workspace.activeLeaf;return e&&this.plugin.nav.forLeaf(e)===this?e:this.leaves().reduce((t,n)=>!t||t.activeTime<n.activeTime?n:t,null)}onload(){let{document:e}=this.win;e.addEventListener("mouseup",t,!0),e.addEventListener("mousedown",t,!0),this.register(()=>{e.removeEventListener("mouseup",t,!0),e.removeEventListener("mousedown",t,!0)});function t(n){if(n.button!==3&&n.button!==4)return;n.preventDefault(),n.stopPropagation();let i=n.target.matchParent(".workspace-leaf");if(i&&n.type==="mouseup"){let o=V.get(i);if(o||app.workspace.iterateAllLeaves(l=>o=l.containerEl===i?l:o),!o)return!1;n.button==3&&h.forLeaf(o).back(),n.button==4&&h.forLeaf(o).forward()}return!1}app.workspace.onLayoutReady(()=>{this.addChild(this.back=new k(this,"back",-1)),this.addChild(this.forward=new k(this,"forward",1)),this.display(),this.numberPanes(),this.registerEvent(app.workspace.on("layout-change",this.numberPanes,this))})}onunload(){this.unNumberPanes(),this.win.document.body.findAll(".workspace-leaf").forEach(e=>{let t=e.find(".view-header > .view-actions"),n=t==null?void 0:t.find('.view-action[class*=" app:go-forward"]'),i=t==null?void 0:t.find('.view-action[class*=" app:go-back"]');n&&N(n,this.forward.oldLabel),i&&N(n,this.back.oldLabel)})}unNumberPanes(e=".workspace-leaf"){this.win.document.body.findAll(e).forEach(t=>{t.style.removeProperty("--pane-relief-label"),t.toggleClass("has-pane-relief-label",!1),t.style.removeProperty("--pane-relief-forward-count"),t.style.removeProperty("--pane-relief-backward-count")})}updateLeaf(e,t=h.forLeaf(e)){e.containerEl.style.setProperty("--pane-relief-forward-count",'"'+(t.lookAhead().length||"")+'"'),e.containerEl.style.setProperty("--pane-relief-backward-count",'"'+(t.lookBehind().length||"")+'"');let n=e.containerEl.find(".view-header > .view-actions"),i=n==null?void 0:n.find('.view-action[class*=" app:go-forward"]'),o=n==null?void 0:n.find('.view-action[class*=" app:go-back"]');i&&this.forward.updateDisplay(t,i),o&&this.back.updateDisplay(t,o)}numberPanes(){this.win.requestAnimationFrame(()=>{this.win===window&&this.unNumberPanes(".workspace-tabs > .workspace-leaf");let e=0,t=null;this.leaves().forEach(n=>{n.containerEl.style.setProperty("--pane-relief-label",++e<9?""+e:""),n.containerEl.toggleClass("has-pane-relief-label",e<9),t=n,this.updateLeaf(n)}),e>8&&(t==null||t.containerEl.style.setProperty("--pane-relief-label","9"),t==null||t.containerEl.toggleClass("has-pane-relief-label",!0))})}onUpdateHistory(e,t){this.win.requestAnimationFrame(()=>{this.updateLeaf(e),t===this.forward.history&&this.forward.setHistory(t),t===this.back.history&&this.back.setHistory(t)})}},j=class extends g.Component{constructor(e,t,n){super();this.owner=e;this.kind=t;this.dir=n;this.history=null}onload(){this.containerEl=this.owner.win.document.body.find(`.titlebar .titlebar-button-container.mod-left .titlebar-button.mod-${this.kind}`),this.count=this.containerEl.createSpan({prepend:this.kind==="back",cls:"history-counter"}),this.history=null,this.oldLabel=this.containerEl.getAttribute("aria-label"),this.registerDomEvent(this.containerEl,"contextmenu",this.openMenu.bind(this));let e=t=>{var n;t.preventDefault(),t.stopImmediatePropagation(),(n=this.history)==null||n[this.kind]()};this.register(()=>this.containerEl.removeEventListener("click",e,!0)),this.containerEl.addEventListener("click",e,!0),this.register(oe(this.owner.win.document.body,"contextmenu",`.view-header > .view-actions > .view-action[class*="app:go-${this.kind}"]`,(t,n)=>{let i=n.matchParent(".workspace-leaf"),o=this.owner.leaves().filter(l=>l.containerEl===i).pop();!o||(t.preventDefault(),t.stopImmediatePropagation(),this.openMenu(t,h.forLeaf(o)))},{capture:!0}))}onunload(){N(this.containerEl,this.oldLabel),this.count.detach(),this.containerEl.toggleClass("mod-active",!1)}setCount(e){this.count.textContent=""+(e||"")}setHistory(e=h.current()){this.updateDisplay(this.history=e)}updateDisplay(e,t=this.containerEl){let n=e[this.dir<0?"lookBehind":"lookAhead"]();t===this.containerEl&&this.setCount(n.length),N(t,n.length?this.oldLabel+`
`+this.formatState(n[0]).title:`No ${this.kind} history`),t.toggleClass("mod-active",n.length>0)}openMenu(e,t=this.history){let n=t[this.dir<0?"lookBehind":"lookAhead"]();if(!n.length)return;let i=new g.Menu;i.dom.addClass("pane-relief-history-menu"),i.dom.on("mousedown",".menu-item",o=>{o.stopPropagation()},!0),n.map(this.formatState.bind(this)).forEach((o,l)=>this.menuItem(o,l,i,t)),i.showAtPosition({x:e.clientX,y:e.clientY+20}),this.owner.historyIsOpen=!0,i.onHide(()=>{this.owner.historyIsOpen=!1,this.owner.display()})}menuItem(e,t,n,i){let{dir:o,kind:l}=this;n.addItem(f=>{s(f),e.file&&p(f.dom)});return;function s(f,u=""){f.setIcon(e.icon).setTitle(u+e.title).onClick(d=>{g.Keymap.isModEvent(d)&&(i=i.cloneTo(app.workspace.splitActiveLeaf())),i.go((t+1)*o,!0)})}function p(f){f.addEventListener("mouseover",u=>{app.workspace.trigger("hover-link",{event:u,source:j.hoverSource,hoverParent:n.dom,targetEl:f,linktext:e.file.path})}),f.setAttr("draggable","true"),f.addEventListener("dragstart",u=>{let d=app.dragManager,w=d.dragFile(u,e.file);d.onDragStart(u,w)}),f.addEventListener("dragend",u=>n.hide()),f.addEventListener("contextmenu",u=>{let d=new g.Menu;d.addItem(w=>s(w,`Go ${l} to `)).addSeparator(),app.workspace.trigger("file-menu",d,e.file,"link-context-menu"),d.showAtPosition({x:u.clientX,y:u.clientY}),u.stopPropagation()},!0)}}formatState(e){var p,f,u;let{viewState:{type:t,state:n},eState:i,path:o}=e,l=o&&app.vault.getAbstractFileByPath(o),s={icon:"",title:"",file:l,type:t,state:n,eState:i};return _[t]?[s.icon,s.title]=_[t]:o&&!l?[s.icon,s.title]=["trash","Missing file "+o]:l instanceof g.TFile&&(s.icon=(p=ie[t])!=null?p:"document",t==="markdown"&&n.mode==="preview"&&(s.icon="lines-of-text"),s.title=l?l.basename+(l.extension!=="md"?"."+l.extension:""):"No file",t==="media-view"&&!l&&(s.title=(u=(f=n.info)==null?void 0:f.filename)!=null?u:s.title)),app.workspace.trigger("pane-relief:format-history-item",s),s}},k=j;k.hoverSource="pane-relief:history-menu";function oe(a,r,e,t,n){return a.on(r,e,t,n),()=>a.off(r,e,t,n)}function N(a,r){r?a.setAttribute("aria-label",r||void 0):a.removeAttribute("aria-label")}var E=class extends O.Plugin{constructor(){super(...arguments);this.use=m.plugin(this);this.nav=this.use(D).watch();this.max=this.addChild(new C)}onload(){K(this),this.app.workspace.registerHoverLinkSource(k.hoverSource,{display:"History dropdowns",defaultMod:!0}),this.app.workspace.onLayoutReady(()=>{this.registerEvent(this.app.vault.on("rename",(e,t)=>{e instanceof O.TFile&&this.app.workspace.iterateAllLeaves(n=>h.forLeaf(n).onRename(e,t))})),this.registerEvent(app.workspace.on("active-leaf-change",e=>this.nav.forLeaf(e).display(e))),this.registerEvent(app.workspace.on("pane-relief:update-history",(e,t)=>this.nav.forLeaf(e).onUpdateHistory(e,t)))}),$(this)}[c("swap-prev","Swap pane with previous in split","Mod+Shift+PageUp")](){return this.leafPlacer(-1)}[c("swap-next","Swap pane with next in split","Mod+Shift+PageDown")](){return this.leafPlacer(1)}[c("go-prev","Cycle to previous workspace pane","Mod+PageUp")](){return()=>this.gotoNthLeaf(-1,!0)}[c("go-next","Cycle to next workspace pane","Mod+PageDown")](){return()=>this.gotoNthLeaf(1,!0)}[c("win-prev","Cycle to previous window",[])](){var e;if((e=app.workspace.floatingSplit)!=null&&e.children.length)return()=>this.gotoNthWindow(-1,!0)}[c("win-next","Cycle to next window",[])](){var e;if((e=app.workspace.floatingSplit)!=null&&e.children.length)return()=>this.gotoNthWindow(1,!0)}[c("go-1st","Jump to 1st pane in the workspace","Alt+1")](){return()=>this.gotoNthLeaf(0)}[c("go-2nd","Jump to 2nd pane in the workspace","Alt+2")](){return()=>this.gotoNthLeaf(1)}[c("go-3rd","Jump to 3rd pane in the workspace","Alt+3")](){return()=>this.gotoNthLeaf(2)}[c("go-4th","Jump to 4th pane in the workspace","Alt+4")](){return()=>this.gotoNthLeaf(3)}[c("go-5th","Jump to 5th pane in the workspace","Alt+5")](){return()=>this.gotoNthLeaf(4)}[c("go-6th","Jump to 6th pane in the workspace","Alt+6")](){return()=>this.gotoNthLeaf(5)}[c("go-7th","Jump to 7th pane in the workspace","Alt+7")](){return()=>this.gotoNthLeaf(6)}[c("go-8th","Jump to 8th pane in the workspace","Alt+8")](){return()=>this.gotoNthLeaf(7)}[c("go-last","Jump to last pane in the workspace","Alt+9")](){return()=>this.gotoNthLeaf(99999999)}[c("win-1st","Switch to 1st window",[])](){var e;if((e=app.workspace.floatingSplit)!=null&&e.children.length)return()=>this.gotoNthWindow(0)}[c("win-2nd","Switch to 2nd window",[])](){var e;if((e=app.workspace.floatingSplit)!=null&&e.children.length)return()=>this.gotoNthWindow(1)}[c("win-3rd","Switch to 3rd window",[])](){var e;if((e=app.workspace.floatingSplit)!=null&&e.children.length)return()=>this.gotoNthWindow(2)}[c("win-4th","Switch to 4th window",[])](){var e;if((e=app.workspace.floatingSplit)!=null&&e.children.length)return()=>this.gotoNthWindow(3)}[c("win-5th","Switch to 5th window",[])](){var e;if((e=app.workspace.floatingSplit)!=null&&e.children.length)return()=>this.gotoNthWindow(4)}[c("win-6th","Switch to 6th window",[])](){var e;if((e=app.workspace.floatingSplit)!=null&&e.children.length)return()=>this.gotoNthWindow(5)}[c("win-7th","Switch to 7th window",[])](){var e;if((e=app.workspace.floatingSplit)!=null&&e.children.length)return()=>this.gotoNthWindow(6)}[c("win-8th","Switch to 8th window",[])](){var e;if((e=app.workspace.floatingSplit)!=null&&e.children.length)return()=>this.gotoNthWindow(7)}[c("win-last","Switch to last window",[])](){var e;if((e=app.workspace.floatingSplit)!=null&&e.children.length)return()=>this.gotoNthWindow(99999999)}[c("put-1st","Place as 1st pane in the split","Mod+Alt+1")](){return()=>this.placeLeaf(0,!1)}[c("put-2nd","Place as 2nd pane in the split","Mod+Alt+2")](){return()=>this.placeLeaf(1,!1)}[c("put-3rd","Place as 3rd pane in the split","Mod+Alt+3")](){return()=>this.placeLeaf(2,!1)}[c("put-4th","Place as 4th pane in the split","Mod+Alt+4")](){return()=>this.placeLeaf(3,!1)}[c("put-5th","Place as 5th pane in the split","Mod+Alt+5")](){return()=>this.placeLeaf(4,!1)}[c("put-6th","Place as 6th pane in the split","Mod+Alt+6")](){return()=>this.placeLeaf(5,!1)}[c("put-7th","Place as 7th pane in the split","Mod+Alt+7")](){return()=>this.placeLeaf(6,!1)}[c("put-8th","Place as 8th pane in the split","Mod+Alt+8")](){return()=>this.placeLeaf(7,!1)}[c("put-last","Place as last pane in the split","Mod+Alt+9")](){return()=>this.placeLeaf(99999999,!1)}[c("maximize","Maximize active pane (Toggle)",[])](){if(this.max.parentForLeaf(app.workspace.activeLeaf))return()=>this.max.toggleMaximize()}onunload(){this.app.workspace.unregisterHoverLinkSource(k.hoverSource)}gotoNthLeaf(e,t){let n=app.workspace.activeLeaf,i=n.getRoot();(i===app.workspace.leftSplit||i===app.workspace.rightSplit)&&(n=app.workspace.getMostRecentLeaf(app.workspace.rootSplit));let o=this.nav.forLeaf(n);n=U(o.leaves(),n,e,t),!n||this.app.workspace.setActiveLeaf(n,!0,!0)}gotoNthWindow(e,t){var o,l,s,p,f;let n=U(this.nav.forAll(),this.nav.forLeaf(app.workspace.activeLeaf),e,t),i=n==null?void 0:n.latestLeaf();i&&app.workspace.setActiveLeaf(i,!0,!0),(f=(p=(s=(l=(o=n==null?void 0:n.win).require)==null?void 0:l.call(o,"electron"))==null?void 0:s.remote)==null?void 0:p.getCurrentWindow())==null||f.focus()}placeLeaf(e,t=!0){let n=this.leafPlacer(e,t);n&&n()}leafPlacer(e,t=!0){let n=this.app.workspace.activeLeaf;if(!n)return!1;let i=n.parentSplit,o=i.children,l=o.indexOf(n);if(l==-1)return!1;if(o.length===1){let s=n.containerEl.matchParent(".hover-popover");if(s&&t&&Math.abs(e)===1){let p=s;for(;p&&(p===s||!p.matches(".hover-popover"));)p=e<0?p.previousElementSibling:p.nextElementSibling;if(p)return()=>{e<0?p.parentElement.insertBefore(s,p):p.parentElement.insertBefore(p,s),app.workspace.onLayoutChange()}}}if(t){if(e+=l,e<0||e>=o.length)return!1}else e>=o.length&&(e=o.length-1),e<0&&(e=0);return l==e?!1:()=>{let s=o[e];o.splice(l,1),o.splice(e,0,n),i.selectTab?i.selectTab(n):(s.containerEl.insertAdjacentElement(l>e?"beforebegin":"afterend",n.containerEl),i.recomputeChildrenDimensions(),n.onResize(),this.app.workspace.onLayoutChange(),this.app.workspace.activeLeaf=null,this.app.workspace.setActiveLeaf(n,!1,!0))}}isSyntheticHistoryEvent(e){let t=this.nav.windows().filter(n=>n.event&&n.event.button===e).pop();return t&&t.event.type==="mousedown"?(t.event.preventDefault(),t.event.stopImmediatePropagation(),!0):!1}};function U(a,r,e,t){return t&&(e+=a.indexOf(r),e=(e+a.length)%a.length),a[e>=a.length?a.length-1:e]}
